function _objectWithoutProperties(t,e){if(null==t)return{};var n,r,o=_objectWithoutPropertiesLoose(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function _objectWithoutPropertiesLoose(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _wrapRegExp(t,e){_wrapRegExp=function(t,e){return new i(t,void 0,e)};var n=_wrapNativeSuper(RegExp),r=RegExp.prototype,o=new WeakMap;function i(t,e,r){var i=n.call(this,t,e);return o.set(i,r||o.get(t)),i}function s(t,e){var n=o.get(e);return Object.keys(n).reduce((function(e,r){return e[r]=t[n[r]],e}),Object.create(null))}return _inherits(i,n),i.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=s(e,this)),e},i.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=o.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+n[e]})))}if("function"==typeof e){var i=this;return r[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!=typeof t[t.length-1]&&t.push(s(t,i)),e.apply(this,t)}))}return r[Symbol.replace].call(this,t,e)},_wrapRegExp.apply(this,arguments)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,t)})(t)}function _construct(t,e,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{kT51:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return gt}));var r=n("jgtz"),o=n("r8pW"),i=/^\s*>\s$/gm,s=r.Node.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["blockquote",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setBlockquote:function(){return function(t){return t.commands.wrapIn("blockquote")}},toggleBlockquote:function(){return function(t){return t.commands.toggleWrap("blockquote")}},unsetBlockquote:function(){return function(t){return t.commands.lift("blockquote")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-b":function(){return t.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[Object(o.e)(i,this.type)]}}),u=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,l=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,p=r.Mark.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["strong",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setBold:function(){return function(t){return t.commands.setMark("bold")}},toggleBold:function(){return function(t){return t.commands.toggleMark("bold")}},unsetBold:function(){return function(t){return t.commands.unsetMark("bold")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-b":function(){return t.editor.commands.toggleBold()}}},addInputRules:function(){return[Object(r.markInputRule)(u,this.type),Object(r.markInputRule)(c,this.type)]},addPasteRules:function(){return[Object(r.markPasteRule)(a,this.type),Object(r.markPasteRule)(l,this.type)]}}),d=/^\s*([-+*])\s$/,f=r.Node.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["ul",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{toggleBulletList:function(){return function(t){return t.commands.toggleList("bulletList","listItem")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-8":function(){return t.editor.commands.toggleBulletList()}}},addInputRules:function(){return[Object(o.e)(d,this.type)]}}),h=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/gm,m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/gm,g=r.Mark.create({name:"code",defaultOptions:{HTMLAttributes:{}},excludes:"_",parseHTML:function(){return[{tag:"code"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["code",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setCode:function(){return function(t){return t.commands.setMark("code")}},toggleCode:function(){return function(t){return t.commands.toggleMark("code")}},unsetCode:function(){return function(t){return t.commands.unsetMark("code")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-e":function(){return t.editor.commands.toggleCode()}}},addInputRules:function(){return[Object(r.markInputRule)(h,this.type)]},addPasteRules:function(){return[Object(r.markPasteRule)(m,this.type)]}}),v=_wrapRegExp(/^```([a-z]*)? $/,{language:1}),b=_wrapRegExp(/^~~~([a-z]*)? $/,{language:1}),y=r.Node.create({name:"codeBlock",defaultOptions:{languageClassPrefix:"language-",HTMLAttributes:{}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes:function(){var t=this;return{language:{default:null,parseHTML:function(e){var n,r=t.options.languageClassPrefix;return _toConsumableArray((null===(n=e.firstElementChild)||void 0===n?void 0:n.classList)||[]).filter((function(t){return t.startsWith(r)})).map((function(t){return t.replace(r,"")}))[0]||null},renderHTML:function(e){return e.language?{class:t.options.languageClassPrefix+e.language}:null}}}},parseHTML:function(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands:function(){return{setCodeBlock:function(t){return function(e){return e.commands.setNode("codeBlock",t)}},toggleCodeBlock:function(t){return function(e){return e.commands.toggleNode("codeBlock","paragraph",t)}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-c":function(){return t.editor.commands.toggleCodeBlock()},Backspace:function(){var e=t.editor.state.selection,n=e.empty,r=e.$anchor;return!(!n||r.parent.type.name!==t.name)&&!(1!==r.pos&&r.parent.textContent.length)&&t.editor.commands.clearNodes()}}},addInputRules:function(){return[Object(o.c)(v,this.type,(function(t){return t.groups})),Object(o.c)(b,this.type,(function(t){return t.groups}))]}}),M=r.Node.create({name:"doc",topNode:!0,content:"block+"}),w=n("ehfC"),O=n("UdmJ"),T=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};T.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){return t.editorView.dom.removeEventListener(e.name,e.handler)}))},T.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},T.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},T.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var u,a,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)u=-pageXOffset,a=-pageYOffset;else{var l=c.getBoundingClientRect();u=l.left-c.scrollLeft,a=l.top-c.scrollTop}this.element.style.left=t.left-u+"px",this.element.style.top=t.top-a+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},T.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},T.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=Object(O.g)(this.editorView.state.doc,n,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(n),this.scheduleRemoval(5e3)}}},T.prototype.dragend=function(){this.scheduleRemoval(20)},T.prototype.drop=function(){this.scheduleRemoval(20)},T.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var k=r.Extension.create({name:"dropCursor",defaultOptions:{color:"currentColor",width:1,class:null},addProseMirrorPlugins:function(){return[(t=this.options,void 0===t&&(t={}),new w.d({view:function(e){return new T(e,t)}}))];var t}}),A=n("ALnk"),L=n("lELC"),_=n("I9T1"),C=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return _.j.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new H(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,r){t:for(;;){if(!r&&e.valid(t))return t;for(var o=t.pos,i=null,s=t.depth;;s--){var u=t.node(s);if(n>0?t.indexAfter(s)<u.childCount:t.index(s)>0){i=u.child(n>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;var a=t.doc.resolve(o+=n);if(e.valid(a))return a}for(;;){var c=n>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!w.c.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue t}break}i=c;var l=t.doc.resolve(o+=n);if(e.valid(l))return l}return null}},e}(w.f);C.prototype.visible=!1,w.f.jsonID("gapcursor",C);var H=function(t){this.pos=t};H.prototype.map=function(t){return new H(t.map(this.pos))},H.prototype.resolve=function(t){var e=t.resolve(this.pos);return C.valid(e)?new C(e):w.f.near(e)};var j=Object(A.a)({ArrowLeft:I("horiz",-1),ArrowRight:I("horiz",1),ArrowUp:I("vert",-1),ArrowDown:I("vert",1)});function I(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,o){var i=t.selection,s=e>0?i.$to:i.$from,u=i.empty;if(i instanceof w.h){if(!o.endOfTextblock(n)||0==s.depth)return!1;u=!1,s=t.doc.resolve(e>0?s.after():s.before())}var a=C.findFrom(s,e,u);return!!a&&(r&&r(t.tr.setSelection(new C(a))),!0)}}function S(t,e,n){if(!t.editable)return!1;var r=t.state.doc.resolve(e);if(!C.valid(r))return!1;var o=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&w.c.isSelectable(t.state.doc.nodeAt(o))||(t.dispatch(t.state.tr.setSelection(new C(r))),0))}function P(t){if(!(t.selection instanceof C))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",L.b.create(t.doc,[L.a.widget(t.selection.head,e,{key:"gapcursor"})])}var R=r.Extension.create({name:"gapCursor",addProseMirrorPlugins:function(){return[new w.d({props:{decorations:P,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&C.valid(n))return new C(n)},handleClick:S,handleKeyDown:j}})]},extendNodeSchema:function(t){var e,n={name:t.name,options:t.options};return{allowGapCursor:null!==(e=Object(r.callOrReturn)(Object(r.getExtensionField)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),x=r.Node.create({name:"hardBreak",defaultOptions:{HTMLAttributes:{}},inline:!0,group:"inline",selectable:!1,parseHTML:function(){return[{tag:"br"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["br",Object(r.mergeAttributes)(this.options.HTMLAttributes,e)]},renderText:function(){return"\n"},addCommands:function(){var t=this;return{setHardBreak:function(){return function(e){var n=e.commands;return n.first([function(){return n.exitCode()},function(){return n.insertContent({type:t.name})}])}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Enter":function(){return t.editor.commands.setHardBreak()},"Shift-Enter":function(){return t.editor.commands.setHardBreak()}}}}),E=r.Node.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return this.options.levels.map((function(t){return{tag:"h"+t,attrs:{level:t}}}))},renderHTML:function(t){var e=t.node,n=t.HTMLAttributes;return["h"+(this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]),Object(r.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands:function(){var t=this;return{setHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.setNode("heading",e)}},toggleHeading:function(e){return function(n){var r=n.commands;return!!t.options.levels.includes(e.level)&&r.toggleNode("heading","paragraph",e)}}}},addKeyboardShortcuts:function(){var t=this;return this.options.levels.reduce((function(e,n){return _objectSpread(_objectSpread({},e),{},_defineProperty({},"Mod-Alt-"+n,(function(){return t.editor.commands.toggleHeading({level:n})})))}),{})},addInputRules:function(){var t=this;return this.options.levels.map((function(e){return Object(o.c)(new RegExp("^(#{1,".concat(e,"})\\s$")),t.type,{level:e})}))}}),B=function(){};B.prototype.append=function(t){return t.length?(t=B.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},B.prototype.prepend=function(t){return t.length?B.from(t).append(this):this},B.prototype.appendInner=function(t){return new $(this,t)},B.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?B.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},B.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},B.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},B.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},B.from=function(t){return t instanceof B?t:t&&t.length?new N(t):B.empty};var N=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(B);B.empty=new N([]);var $=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(B),K=B,z=function(t,e){this.items=t,this.eventCount=e};z.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--)if(this.items.get(i-1).selection){--i;break}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,u,a=t.tr,c=[],l=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void l.push(t);if(r){l.push(new D(t.map));var p,d=t.step.map(r.slice(o));d&&a.maybeStep(d).doc&&c.push(new D(p=a.mapping.maps[a.mapping.maps.length-1],null,null,c.length+l.length)),o--,p&&r.appendMap(p,o)}else a.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,u=new z(n.items.slice(0,i).append(l.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:a,selection:s}},z.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,u=!r&&s.length?s.get(s.length-1):null,a=0;a<t.steps.length;a++){var c,l=t.steps[a].invert(t.docs[a]),p=new D(t.mapping.maps[a],l,e);(c=u&&u.merge(p))&&(p=c,a?o.pop():s=s.slice(0,s.length-1)),o.push(p),e&&(i++,e=null),r||(u=p)}var d,f,h,m=i-n.depth;return m>q&&(f=m,(d=s).forEach((function(t,e){if(t.selection&&0==f--)return h=e,!1})),s=d.slice(h),i-=m),new z(s.append(o),i)},z.prototype.remapping=function(t,e){var n=new O.a;return this.items.forEach((function(e,r){n.appendMap(e.map,null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null)}),t,e),n},z.prototype.addMaps=function(t){return 0==this.eventCount?this:new z(this.items.append(t.map((function(t){return new D(t)}))),this.eventCount)},z.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var u=e;this.items.forEach((function(e){var r=o.getMirror(--u);if(null!=r){i=Math.min(i,r);var a=o.maps[r];if(e.step){var c=t.steps[r].invert(t.docs[r]),l=e.selection&&e.selection.map(o.slice(u+1,r));l&&s++,n.push(new D(a,c,l))}else n.push(new D(a))}}),r);for(var a=[],c=e;c<i;c++)a.push(new D(o.maps[c]));var l=this.items.slice(0,r).append(a).append(n),p=new z(l,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-n.length)),p},z.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},z.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var u=i.step.map(e.slice(n)),a=u&&u.getMap();if(n--,a&&e.appendMap(a,n),u){var c=i.selection&&i.selection.map(e.slice(n));c&&o++;var l,p=new D(a.invert(),u,c),d=r.length-1;(l=r.length&&r[d].merge(p))?r[d]=l:r.push(p)}}else i.map&&n--}),this.items.length,0),new z(K.from(r.reverse()),o)},z.empty=new z(K.empty,0);var D=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};D.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new D(e.getMap().invert(),e,this.selection)}};var V=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},q=20;function W(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function G(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function F(t,e,n,r){var o=X(e),i=Y.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var u=s.selection.resolve(s.transform.doc),a=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),c=new V(r?a:s.remaining,r?s.remaining:a,null,0);n(s.transform.setSelection(u).setMeta(Y,{redo:r,historyState:c}).scrollIntoView())}}var J=!1,U=null;function X(t){var e=t.plugins;if(U!=e){J=!1,U=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){J=!0;break}}return J}var Y=new w.e("history"),Q=new w.e("closeHistory");function Z(t,e){var n=Y.getState(t);return!(!n||0==n.done.eventCount||(e&&F(n,t,e,!1),0))}function tt(t,e){var n=Y.getState(t);return!(!n||0==n.undone.eventCount||(e&&F(n,t,e,!0),0))}var et=r.Extension.create({name:"history",defaultOptions:{depth:100,newGroupDelay:500},addCommands:function(){return{undo:function(){return function(t){return Z(t.state,t.dispatch)}},redo:function(){return function(t){return tt(t.state,t.dispatch)}}}},addProseMirrorPlugins:function(){return[(t=this.options,new w.d({key:Y,state:{init:function(){return new V(z.empty,z.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(Y);if(i)return i.historyState;n.getMeta(Q)&&(t=new V(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(Y))return s.getMeta(Y).redo?new V(t.done.addTransform(n,null,r,X(e)),t.undone,W(n.mapping.maps[n.steps.length-1]),t.prevTime):new V(t.done,t.undone.addTransform(n,null,r,X(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new V(t.done.rebased(n,o),t.undone.rebased(n,o),G(t.prevRanges,n.mapping),t.prevTime):new V(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),G(t.prevRanges,n.mapping),t.prevTime);var u=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),a=s?G(t.prevRanges,n.mapping):W(n.mapping.maps[n.steps.length-1]);return new V(t.done.addTransform(n,u?e.selection.getBookmark():null,r,X(e)),z.empty,a,n.time)}(n,r,e,t)}},config:t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},props:{handleDOMEvents:{beforeinput:function(t,e){var n="historyUndo"==e.inputType?Z(t.state,t.dispatch):"historyRedo"==e.inputType&&tt(t.state,t.dispatch);return n&&e.preventDefault(),n}}}}))];var t},addKeyboardShortcuts:function(){var t=this;return{"Mod-z":function(){return t.editor.commands.undo()},"Mod-y":function(){return t.editor.commands.redo()},"Shift-Mod-z":function(){return t.editor.commands.redo()},"Mod-\u044f":function(){return t.editor.commands.undo()},"Shift-Mod-\u044f":function(){return t.editor.commands.redo()}}}}),nt=r.Node.create({name:"horizontalRule",defaultOptions:{HTMLAttributes:{}},group:"block",parseHTML:function(){return[{tag:"hr"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["hr",Object(r.mergeAttributes)(this.options.HTMLAttributes,e)]},addCommands:function(){var t=this;return{setHorizontalRule:function(){return function(e){return(0,e.chain)().command((function(t){var e=t.tr,n=t.dispatch,r=e.selection,o=r.empty,i=r.$anchor;if(!o||!i.parent.isTextblock||i.parent.type.spec.code||i.parent.textContent||!n)return!0;var s=i.before();return e.deleteRange(s,s+1),!0})).insertContent({type:t.name}).command((function(t){var e,n=t.tr;if(t.dispatch){var r=n.selection.$from,o=r.parent,i=r.pos+1;if(!n.doc.nodeAt(i)){var s=null===(e=o.type.contentMatch.defaultType)||void 0===e?void 0:e.create();s&&(n.insert(i,s),n.setSelection(w.h.create(n.doc,i)))}n.scrollIntoView()}return!0})).run()}}}},addInputRules:function(){return[Object(r.nodeInputRule)(/^(?:---|\u2014-|___\s|\*\*\*\s)$/,this.type)]}}),rt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,ot=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,it=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,st=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,ut=r.Mark.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"em"},{tag:"i",getAttrs:function(t){return"normal"!==t.style.fontStyle&&null}},{style:"font-style=italic"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["em",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setItalic:function(){return function(t){return t.commands.setMark("italic")}},toggleItalic:function(){return function(t){return t.commands.toggleMark("italic")}},unsetItalic:function(){return function(t){return t.commands.unsetMark("italic")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-i":function(){return t.editor.commands.toggleItalic()}}},addInputRules:function(){return[Object(r.markInputRule)(rt,this.type),Object(r.markInputRule)(it,this.type)]},addPasteRules:function(){return[Object(r.markPasteRule)(ot,this.type),Object(r.markPasteRule)(st,this.type)]}}),at=r.Node.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["li",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts:function(){var t=this;return{Enter:function(){return t.editor.commands.splitListItem("listItem")},Tab:function(){return t.editor.commands.sinkListItem("listItem")},"Shift-Tab":function(){return t.editor.commands.liftListItem("listItem")}}}}),ct=/^(\d+)\.\s$/,lt=r.Node.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes:function(){return{start:{default:1,parseHTML:function(t){return t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(t){var e=t.HTMLAttributes,n=e.start,o=_objectWithoutProperties(e,["start"]);return 1===n?["ol",Object(r.mergeAttributes)(this.options.HTMLAttributes,o),0]:["ol",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{toggleOrderedList:function(){return function(t){return t.commands.toggleList("orderedList","listItem")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-7":function(){return t.editor.commands.toggleOrderedList()}}},addInputRules:function(){return[Object(o.e)(ct,this.type,(function(t){return{start:+t[1]}}),(function(t,e){return e.childCount+e.attrs.start===+t[1]}))]}}),pt=r.Node.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"}]},renderHTML:function(t){var e=t.HTMLAttributes;return["p",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setParagraph:function(){return function(t){return t.commands.setNode("paragraph")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Alt-0":function(){return t.editor.commands.setParagraph()}}}}),dt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/gm,ft=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/gm,ht=r.Mark.create({name:"strike",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:function(t){return!!t.includes("line-through")&&{}}}]},renderHTML:function(t){var e=t.HTMLAttributes;return["s",Object(r.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands:function(){return{setStrike:function(){return function(t){return t.commands.setMark("strike")}},toggleStrike:function(){return function(t){return t.commands.toggleMark("strike")}},unsetStrike:function(){return function(t){return t.commands.unsetMark("strike")}}}},addKeyboardShortcuts:function(){var t=this;return{"Mod-Shift-x":function(){return t.editor.commands.toggleStrike()}}},addInputRules:function(){return[Object(r.markInputRule)(dt,this.type)]},addPasteRules:function(){return[Object(r.markPasteRule)(ft,this.type)]}}),mt=r.Node.create({name:"text",group:"inline"}),gt=r.Extension.create({name:"starterKit",addExtensions:function(){var t,e,n,r,o,i,u,a,c,l,d,h,m,v,b,w,O,T,A=[];return!1!==this.options.blockquote&&A.push(s.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&A.push(p.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&A.push(f.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&A.push(g.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&A.push(y.configure(null===(o=this.options)||void 0===o?void 0:o.codeBlock)),!1!==this.options.document&&A.push(M.configure(null===(i=this.options)||void 0===i?void 0:i.document)),!1!==this.options.dropcursor&&A.push(k.configure(null===(u=this.options)||void 0===u?void 0:u.dropcursor)),!1!==this.options.gapcursor&&A.push(R.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&A.push(x.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&A.push(E.configure(null===(l=this.options)||void 0===l?void 0:l.heading)),!1!==this.options.history&&A.push(et.configure(null===(d=this.options)||void 0===d?void 0:d.history)),!1!==this.options.horizontalRule&&A.push(nt.configure(null===(h=this.options)||void 0===h?void 0:h.horizontalRule)),!1!==this.options.italic&&A.push(ut.configure(null===(m=this.options)||void 0===m?void 0:m.italic)),!1!==this.options.listItem&&A.push(at.configure(null===(v=this.options)||void 0===v?void 0:v.listItem)),!1!==this.options.orderedList&&A.push(lt.configure(null===(b=this.options)||void 0===b?void 0:b.orderedList)),!1!==this.options.paragraph&&A.push(pt.configure(null===(w=this.options)||void 0===w?void 0:w.paragraph)),!1!==this.options.strike&&A.push(ht.configure(null===(O=this.options)||void 0===O?void 0:O.strike)),!1!==this.options.text&&A.push(mt.configure(null===(T=this.options)||void 0===T?void 0:T.text)),A}})}}]);